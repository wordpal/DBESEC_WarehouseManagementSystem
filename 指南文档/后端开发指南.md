ğŸ› ï¸ åç«¯å¼€å‘æŒ‡å—

ä¸€ã€é¡¹ç›®æ¶æ„è¯´æ˜

text

com.warehouse

â”œâ”€â”€ beans/          # å®ä½“ç±»ï¼ˆProduct, Warehouseç­‰ï¼‰

â”œâ”€â”€ dao/            # æ•°æ®è®¿é—®æ¥å£

â”œâ”€â”€ dao/impl/       # DAOå®ç°ç±»

â”œâ”€â”€ service/        # ä¸šåŠ¡é€»è¾‘æ¥å£

â”œâ”€â”€ service/impl/   # Serviceå®ç°ç±»

â”œâ”€â”€ controller/     # Servletæ§åˆ¶å™¨

â”œâ”€â”€ util/           # å·¥å…·ç±»

â””â”€â”€ filter/         # è¿‡æ»¤å™¨

äºŒã€Serviceå±‚ä½¿ç”¨æ‰‹å†Œ

1\. æ‰€æœ‰Serviceå·²å®ç°

ProductServiceImpl - äº§å“ç®¡ç†



WarehouseServiceImpl - ä»“åº“ç®¡ç†



InventoryServiceImpl - åº“å­˜ç®¡ç†



InboundServiceImpl - å…¥åº“ç®¡ç†



OutboundServiceImpl - å‡ºåº“ç®¡ç†



2\. åŸºæœ¬ä½¿ç”¨æ–¹å¼

java

// åˆå§‹åŒ–Service

ProductService productService = new ProductServiceImpl();



// è°ƒç”¨æ–¹æ³•

JsonResponse response = productService.getById(1);



// å¤„ç†å“åº”

if (response.getCode() == 200) {

&nbsp;   Product product = (Product) response.getData();

&nbsp;   // å¤„ç†ä¸šåŠ¡é€»è¾‘

}

3\. ç»Ÿä¸€å“åº”æ ¼å¼

java

// æˆåŠŸå“åº”

return JsonResponse.success(data);

return JsonResponse.success("æ“ä½œæˆåŠŸ", data);



// é”™è¯¯å“åº”

return JsonResponse.error("é”™è¯¯ä¿¡æ¯");

return JsonResponse.error(400, "å‚æ•°é”™è¯¯");

return JsonResponse.notFound("èµ„æºä¸å­˜åœ¨");

ä¸‰ã€æ ¸å¿ƒä¸šåŠ¡é€»è¾‘è¯´æ˜

1\. æ™ºèƒ½è´§ä½æ¨èç®—æ³•ï¼ˆInventoryServiceImplï¼‰

java

public JsonResponse recommendLocation(int productId, int warehouseId, int quantity) {

&nbsp;   // 1. è·å–äº§å“å°ºå¯¸ä¿¡æ¯

&nbsp;   // 2. è·å–æŒ‡å®šä»“åº“çš„ç©ºé—²è´§ä½

&nbsp;   // 3. è®¡ç®—åŒ¹é…åº¦è¯„åˆ†

&nbsp;   // 4. è¿”å›æ¨èåˆ—è¡¨ï¼ˆæŒ‰è¯„åˆ†æ’åºï¼‰

}

2\. FIFOå‡ºåº“ç­–ç•¥ï¼ˆOutboundServiceImplï¼‰

java

public JsonResponse fifoOutbound(int productId, int quantity, String operator) {

&nbsp;   // 1. æ£€æŸ¥æ€»åº“å­˜æ˜¯å¦è¶³å¤Ÿ

&nbsp;   // 2. æŒ‰å…¥åº“æ—¶é—´è·å–æœ€æ—©çš„åº“å­˜è®°å½•

&nbsp;   // 3. ä»æœ€æ—©æ‰¹æ¬¡å¼€å§‹æ‰£å‡

&nbsp;   // 4. æ›´æ–°åº“å­˜å’Œåˆ›å»ºå‡ºåº“å•

}

3\. ä½åº“å­˜é¢„è­¦è®¡ç®—

java

// è§„åˆ™ï¼šå½“å‰åº“å­˜ â‰¤ å®‰å…¨åº“å­˜

List<Inventory> lowStockList = inventoryDAO.getLowStockInventory();

å››ã€æ•°æ®åº“æ“ä½œè§„èŒƒ

1\. è¿æ¥è·å–å’Œé‡Šæ”¾

java

Connection conn = null;

PreparedStatement pstmt = null;

ResultSet rs = null;



try {

&nbsp;   conn = DatabaseUtil.getConnection();

&nbsp;   // æ‰§è¡Œæ•°æ®åº“æ“ä½œ

} catch (SQLException e) {

&nbsp;   e.printStackTrace();

} finally {

&nbsp;   DatabaseUtil.close(conn, pstmt, rs); // å¿…é¡»å…³é—­ï¼

}

2\. äº‹åŠ¡å¤„ç†ç¤ºä¾‹

java

public boolean createInboundOrder(InboundOrder order) {

&nbsp;   Connection conn = null;

&nbsp;   try {

&nbsp;       conn = DatabaseUtil.getConnection();

&nbsp;       conn.setAutoCommit(false); // å¼€å¯äº‹åŠ¡

&nbsp;       

&nbsp;       // 1. æ’å…¥å…¥åº“å•

&nbsp;       inboundOrderDAO.insert(order);

&nbsp;       

&nbsp;       // 2. æ›´æ–°åº“å­˜

&nbsp;       inventoryDAO.addQuantity(order.getProductId(), order.getLocationId(), order.getQuantity());

&nbsp;       

&nbsp;       conn.commit(); // æäº¤äº‹åŠ¡

&nbsp;       return true;

&nbsp;   } catch (SQLException e) {

&nbsp;       if (conn != null) {

&nbsp;           try { conn.rollback(); } catch (SQLException ex) {}

&nbsp;       }

&nbsp;       return false;

&nbsp;   }

}

äº”ã€Servletå¼€å‘è§„èŒƒ

1\. å‚æ•°è·å–

java

// è·å–å¿…å¡«å‚æ•°

int id = Integer.parseInt(request.getParameter("id"));



// è·å–å¯é€‰å‚æ•°

String keyword = request.getParameter("keyword");

if (keyword == null) keyword = "";



// åˆ†é¡µå‚æ•°

int pageNum = Integer.parseInt(

&nbsp;   request.getParameter("pageNum") == null ? "1" : request.getParameter("pageNum")

);

2\. å“åº”è®¾ç½®

java

response.setContentType("application/json;charset=UTF-8");

response.setCharacterEncoding("UTF-8");

response.getWriter().write(gson.toJson(result));

å…­ã€éœ€è¦ä½ å®Œæˆçš„ä»»åŠ¡

âœ… å·²ç”±CåŒå­¦å®Œæˆï¼š

æ‰€æœ‰DAOå®ç°ç±»



æ‰€æœ‰Serviceå®ç°ç±»



æ‰€æœ‰Servletæ§åˆ¶å™¨



æ•°æ®åº“è¿æ¥å·¥å…·



ğŸ”§ éœ€è¦ä½ ååŠ©å®Œæˆï¼š

ä»»åŠ¡1ï¼šä¸šåŠ¡é€»è¾‘éªŒè¯



java

// è¯·æµ‹è¯•ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

1\. æ™ºèƒ½è´§ä½æ¨èæ˜¯å¦åˆç†

2\. FIFOå‡ºåº“ç­–ç•¥æ˜¯å¦æ­£ç¡®æ‰£å‡

3\. åº“å­˜æ›´æ–°çš„äº‹åŠ¡å®Œæ•´æ€§

ä»»åŠ¡2ï¼šé”™è¯¯å¤„ç†ä¼˜åŒ–



java

// ä¸ºä»¥ä¸‹åœºæ™¯æ·»åŠ é”™è¯¯å¤„ç†ï¼š

1\. åº“å­˜ä¸è¶³æ—¶çš„å‹å¥½æç¤º

2\. æ•°æ®åº“è¿æ¥å¤±è´¥çš„é‡è¯•æœºåˆ¶

3\. å‚æ•°éªŒè¯å’Œåˆæ³•æ€§æ£€æŸ¥

ä»»åŠ¡3ï¼šæ€§èƒ½ä¼˜åŒ–



java

// å¯ä¼˜åŒ–ç‚¹ï¼š

1\. åˆ†é¡µæŸ¥è¯¢çš„SQLä¼˜åŒ–

2\. é¢‘ç¹æŸ¥è¯¢çš„ç¼“å­˜æœºåˆ¶

3\. æ•°æ®åº“è¿æ¥æ± é…ç½®

ä»»åŠ¡4ï¼šæ—¥å¿—è®°å½•



java

// æ·»åŠ æ“ä½œæ—¥å¿—ï¼š

1\. æ‰€æœ‰å¢åˆ æ”¹æ“ä½œè®°å½•æ“ä½œäºº

2\. é‡è¦ä¸šåŠ¡æ“ä½œè®°å½•æ—¥å¿—

3\. å¼‚å¸¸æƒ…å†µçš„è¯¦ç»†æ—¥å¿—

ä¸ƒã€æµ‹è¯•æŒ‡å—

1\. APIæ¥å£æµ‹è¯•

ä½¿ç”¨Postmanæµ‹è¯•æ‰€æœ‰æ¥å£ï¼š



GETè¯·æ±‚ï¼šç›´æ¥åœ¨æµè§ˆå™¨æµ‹è¯•



POSTè¯·æ±‚ï¼šä½¿ç”¨Postmanæˆ–curl



2\. ä¸šåŠ¡é€»è¾‘æµ‹è¯•

java

// ç¼–å†™å•å…ƒæµ‹è¯•

@Test

public void testFIFOOutbound() {

&nbsp;   // 1. å‡†å¤‡æµ‹è¯•æ•°æ®

&nbsp;   // 2. è°ƒç”¨fifoOutboundæ–¹æ³•

&nbsp;   // 3. éªŒè¯åº“å­˜æ˜¯å¦æ­£ç¡®æ‰£å‡

&nbsp;   // 4. éªŒè¯å‡ºåº“å•æ˜¯å¦æ­£ç¡®åˆ›å»º

}

3\. æ•°æ®åº“æµ‹è¯•

sql

-- éªŒè¯æ•°æ®ä¸€è‡´æ€§

SELECT \* FROM inventory WHERE quantity < 0;  -- ä¸åº”æœ‰è´Ÿæ•°åº“å­˜

SELECT product\_id, SUM(quantity) FROM inventory GROUP BY product\_id;

å…«ã€åä½œäº‹é¡¹

ä¸AåŒå­¦åä½œï¼š

ç¡®è®¤æ‰€æœ‰APIæ¥å£çš„è¯·æ±‚/å“åº”æ ¼å¼



è®¨è®ºåˆ†é¡µã€æœç´¢ç­‰å‚æ•°çš„å‘½åè§„èŒƒ



ååŠ©è°ƒè¯•å‰ç«¯è°ƒç”¨é—®é¢˜



ä¸CåŒå­¦åä½œï¼š

ç†è§£æ™ºèƒ½æ¨èç®—æ³•çš„å®ç°é€»è¾‘



äº†è§£å¼‚å¸¸å¤„ç†æœºåˆ¶



å­¦ä¹ é¡¹ç›®çš„æ¶æ„è®¾è®¡



ä¸DåŒå­¦åä½œï¼š

ç¡®è®¤ä¸šåŠ¡è§„åˆ™çš„æ­£ç¡®æ€§



è®¨è®ºæ•°æ®éªŒè¯è§„åˆ™



æä¾›æŠ€æœ¯å®ç°å»ºè®®



ä¹ã€ç«‹å³å¼€å§‹çš„ä»»åŠ¡

âœ… ä»Šå¤©å¯ä»¥å¼€å§‹ï¼š



ç†Ÿæ‚‰é¡¹ç›®ä»£ç ç»“æ„



æµ‹è¯•æ‰€æœ‰Serviceçš„åŠŸèƒ½



éªŒè¯æ ¸å¿ƒä¸šåŠ¡é€»è¾‘



ç¼–å†™ç®€å•çš„æµ‹è¯•ç”¨ä¾‹



ğŸ“ éœ€è¦è®¨è®ºçš„äº‹é¡¹ï¼š



é”™è¯¯ç çš„ç»Ÿä¸€è§„èŒƒ



æ—¥å¿—è®°å½•çš„å…·ä½“è¦æ±‚



æ€§èƒ½ä¼˜åŒ–çš„ä¼˜å…ˆçº§



è®°ä½ï¼šæ‰€æœ‰åŸºç¡€æ¶æ„å·²ç»å®Œæˆï¼Œä½ çš„é‡ç‚¹æ˜¯ä¸šåŠ¡é€»è¾‘çš„å®Œå–„å’Œä¼˜åŒ–ï¼

